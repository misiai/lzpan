{"version":3,"sources":["webpack:///./src/core/func.js","webpack:///./src/components/home/SearchBox.vue?05bd","webpack:///src/components/home/SearchBox.vue","webpack:///./src/components/home/SearchBox.vue?5783","webpack:///./src/components/home/SearchBox.vue","webpack:///./src/components/home/SearchBox.vue?7f87"],"names":["throttle","fun","delay","isRun","setTimeout","apply","arguments","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","toHome","directives","name","rawName","value","expression","ref","domProps","$event","showSuggest","type","indexOf","_k","keyCode","key","onSearch","target","composing","kw","suggestions","length","_l","item","i","class","active","suggestionChose","choseKw","_v","_s","_e","staticRenderFns","data","what","reqSuggest","timer","methods","val","$router","push","query","getBDSuggestion","$jsonp","then","console","log","res","watch","mounted","$nextTick","window","jsonpCallback","document","addEventListener","e","code","component"],"mappings":"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","file":"js/chunk-23363176.js","sourcesContent":["export function throttle (fun, delay) {\n  let isRun = true\n\n  return function () {\n    if (!isRun) {\n      return\n    }\n    isRun = false// 关键在这，如果持续触发该函数，那么此isRun一直为false，那么下面的定时器就不会执行\n    setTimeout(() => {\n      fun.apply(this, arguments)\n      isRun = true\n    }, delay)\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-box\"},[_c('div',{staticClass:\"logo\"},[_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":_vm.toHome}},[_c('img',{attrs:{\"src\":require(\"../../assets/img/lzpan.svg\"),\"alt\":\"lzpan\"}})])]),_c('div',{staticClass:\"search\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.kw),expression:\"kw\"}],ref:\"input\",attrs:{\"type\":\"text\",\"placeholder\":\"影视、小说、网盘\",\"aria-label\":\"search\",\"autofocus\":\"\"},domProps:{\"value\":(_vm.kw)},on:{\"focus\":function($event){_vm.showSuggest=true},\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onSearch($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.kw=$event.target.value}}}),_c('button',{on:{\"click\":_vm.onSearch}},[_c('span',{staticClass:\"iconfont icon-search\"})]),(_vm.suggestions.length > 0 && _vm.showSuggest)?_c('div',{ref:\"suggestion-box\",staticClass:\"search-notice-box\"},_vm._l((_vm.suggestions),function(item,i){return _c('div',{key:i,class:{item:true,active: i === _vm.suggestionChose},on:{\"click\":function($event){return _vm.choseKw(item)}}},[_vm._v(\" \"+_vm._s(item)+\" \")])}),0):_vm._e()]),_c('div',{staticClass:\"info\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"search-box\">\n    <div class=\"logo\">\n      <a href=\"#\" @click=\"toHome\">\n        <img src=\"../../assets/img/lzpan.svg\" alt=\"lzpan\">\n      </a>\n    </div>\n    <div class=\"search\">\n      <input v-model=\"kw\" type=\"text\" placeholder=\"影视、小说、网盘\" aria-label=\"search\" autofocus\n             @focus=\"showSuggest=true\"\n             ref=\"input\"\n             @keyup.enter=\"onSearch\">\n      <button @click=\"onSearch\">\n        <span class=\"iconfont icon-search\"></span>\n      </button>\n      <div class=\"search-notice-box\" v-if=\"suggestions.length > 0 && showSuggest\" ref=\"suggestion-box\">\n        <div :class=\"{item:true,active: i === suggestionChose}\" v-for=\"(item,i) in suggestions\" :key=\"i\" @click=\"choseKw(item)\">\n          {{ item }}\n        </div>\n      </div>\n    </div>\n    <div class=\"info\">\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport { throttle } from '@/core/func'\n\nexport default {\n  name: 'SearchBox',\n  data () {\n    return {\n      kw: '',\n      what: 'movie',\n      showSuggest: false,\n      reqSuggest: false,\n      suggestionChose: -1,\n      suggestions: [],\n      timer: null\n    }\n  },\n  methods: {\n    choseKw (val) {\n      this.kw = val\n      this.onSearch()\n    },\n    toHome () {\n      this.$router.push({ name: 'Home' })\n    },\n    onSearch () {\n      if (this.kw !== '') {\n        this.$router.push({\n          name: 'Search',\n          query: {\n            kw: this.kw,\n            what: this.what\n          }\n        })\n      }\n    },\n    getBDSuggestion () {\n      if (!this.reqSuggest) {\n        return\n      }\n      if (this.kw === '') {\n        return\n      }\n      this.$jsonp('https://suggestion.baidu.com/su?cb=jsonpCallback&wd=' + this.kw).then((res) => {\n        console.log(res)\n      })\n        .catch((err) => {\n          console.log('jsonp err: ', err)\n        })\n    }\n  },\n  watch: {\n    kw () {\n      throttle(this.getBDSuggestion, 100)()\n    }\n  },\n  mounted () {\n    this.$nextTick(() => {\n      window.jsonpCallback = (res) => {\n        this.suggestions = res.s\n      }\n\n      document.addEventListener('click', (e) => {\n        if (e.target !== this.$refs['suggestion-box'] && e.target !== this.$refs.input) {\n          this.showSuggest = false\n        }\n      })\n\n      // 监听箭头选择\n      this.$refs.input.addEventListener('keyup', (e) => {\n        const code = e.keyCode\n        if (code !== 40 && code !== 38) {\n          this.reqSuggest = true\n          return\n        }\n\n        this.reqSuggest = false\n        if (code === 40) { // down\n          this.suggestionChose = (this.suggestionChose + 1) % (this.suggestions.length || 0)\n        }\n\n        if (code === 38) { // up\n          this.suggestionChose = (this.suggestionChose - 1) % (this.suggestions.length || 0)\n          if (this.suggestionChose < 0) {\n            this.suggestionChose = this.suggestions.length - 1\n          }\n        }\n\n        this.kw = this.suggestions[this.suggestionChose]\n      })\n    })\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n@media only screen and (max-width: 800px) {\n  .search-box {\n    width: 100% !important;\n    margin-top: 8rem !important;\n\n    .search {\n      width: 90% !important;\n      text-align: center;\n      margin: 0 auto;\n    }\n  }\n}\n\n.search-box {\n  width: 800px;\n  margin: 8rem auto;\n  //border: 1px solid #dddddd;\n\n  .logo {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n\n    img {\n      height: 6rem;\n      text-align: center;\n      margin: 0 auto;\n    }\n  }\n\n  .search {\n    position: relative;\n    box-shadow: 0 8px 33px 0 rgba(30, 35, 42, 0.08);\n    background: #fff;\n    width: 100%;\n    height: 44px;\n    border-radius: 2px;\n    display: flex;\n    margin-top: 1rem;\n    transition: box-shadow 200ms cubic-bezier(0.4, 0, 0.2, 1);\n\n    input {\n      width: 520px;\n      border: none;\n      padding: 0 0 0 15px;\n      outline: none;\n      height: 100%;\n      flex: 1;\n      color: rgb(51, 51, 51);\n    }\n\n    button {\n      text-align: center;\n      width: 54px;\n      height: 100%;\n      padding: 0;\n      background: #fff;\n      border: none;\n      border-bottom-left-radius: 0;\n      border-top-left-radius: 0;\n      cursor: pointer;\n      display: block;\n      outline: none;\n\n      span {\n        color: #e74c3c;\n        font-size: 1.2rem;\n        font-weight: bold;\n      }\n    }\n\n    .search-notice-box {\n      position: absolute;\n      box-shadow: 0 8px 33px 0 rgba(30, 35, 42, 0.03);\n      //border-top: 1px solid #D5E0EA;\n      top: 46px;\n      left: 0;\n      right: 0;\n      width: 100%;\n      background: white;\n      border-radius: 2px;\n\n      .item {\n        font-size: .9rem;\n        padding: .5rem .6rem;\n        cursor: pointer;\n        text-align: left;\n\n        &:hover,&.active {\n          background-color: #fafafc;\n        }\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchBox.vue?vue&type=template&id=248984c2&scoped=true&\"\nimport script from \"./SearchBox.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchBox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchBox.vue?vue&type=style&index=0&id=248984c2&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"248984c2\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchBox.vue?vue&type=style&index=0&id=248984c2&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchBox.vue?vue&type=style&index=0&id=248984c2&scoped=true&lang=scss&\""],"sourceRoot":""}